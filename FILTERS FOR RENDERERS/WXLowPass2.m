// ******************************************************************************************
//  WXLowPass2
//  Created by Paul Webb on Thu Dec 30 2004.
// ******************************************************************************************

#import "WXLowPass2.h"


@implementation WXLowPass2


// ******************************************************************************************
-(id)		initFilter:(UInt32)d a0:(float)a0 b1:(float)b1
{
if(self=[super init])
	{
	msize=44100;
	delay=d;
	count=0;
	s1=a0;
	s2=b1;
	xlast=ylast=0;
	tap=malloc(msize*sizeof(float));
	}
return self;
}
// ******************************************************************************************
-(void)		dealloc
{
free(tap);
[super dealloc];
}
// ******************************************************************************************
-(void)		clear
{
int i;
count=0;
for(i=0;i<msize;i++)
	tap[i]=0;
}
// ******************************************************************************************
// y(n) = a0*x(n) + a0*x(n-1) - b1*y(n-1)
-(float)	filter:(float)input
{
output=input;
output=(input+xlast)*s1-s2*ylast; 
xlast=input;
ylast=output;
return output;
}
// ******************************************************************************************
-(float)	filterFB:(float)input
{
return 0;
}
// ******************************************************************************************

@end
